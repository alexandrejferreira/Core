"use strict";

/*
 * MikoPBX - free phone system for small business
 * Copyright © 2017-2023 Alexey Portnov and Nikolay Beketov
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with this program.
 * If not, see <https://www.gnu.org/licenses/>.
 */

/* global globalRootUrl,globalTranslate, Extensions, Form, SemanticLocalization, SoundFilesSelector */
$.fn.form.settings.rules.customNotEmptyIfActionRule = function (value, action) {
  if (value.length === 0 && $('#action').val() === action) {
    return false;
  }

  return true;
};

var outOfWorkTimeRecord = {
  $formObj: $('#save-outoffwork-form'),
  $defaultDropdown: $('#save-outoffwork-form .dropdown-default'),
  $rangeDaysStart: $('#range-days-start'),
  $rangeDaysEnd: $('#range-days-end'),
  $rangeTimeStart: $('#range-time-start'),
  $rangeTimeEnd: $('#range-time-end'),
  $date_from: $('#date_from'),
  $date_to: $('#date_to'),
  $time_to: $('#time_to'),
  $forwardingSelectDropdown: $('#save-outoffwork-form .forwarding-select'),
  validateRules: {
    audio_message_id: {
      identifier: 'audio_message_id',
      rules: [{
        type: 'customNotEmptyIfActionRule[playmessage]',
        prompt: globalTranslate.tf_ValidateAudioMessageEmpty
      }]
    },
    extension: {
      identifier: 'extension',
      rules: [{
        type: 'customNotEmptyIfActionRule[extension]',
        prompt: globalTranslate.tf_ValidateExtensionEmpty
      }]
    },
    timefrom: {
      optional: true,
      identifier: 'time_from',
      rules: [{
        type: 'regExp',
        value: /^(2[0-3]|1?[0-9]):([0-5]?[0-9])$/,
        prompt: globalTranslate.tf_ValidateCheckTimeInterval
      }]
    },
    timeto: {
      identifier: 'time_to',
      optional: true,
      rules: [{
        type: 'regExp',
        value: /^(2[0-3]|1?[0-9]):([0-5]?[0-9])$/,
        prompt: globalTranslate.tf_ValidateCheckTimeInterval
      }]
    }
  },
  initialize: function initialize() {
    $('#out-time-modify-menu .item').tab();
    outOfWorkTimeRecord.$defaultDropdown.dropdown();
    outOfWorkTimeRecord.$rangeDaysStart.calendar({
      firstDayOfWeek: SemanticLocalization.calendarFirstDayOfWeek,
      text: SemanticLocalization.calendarText,
      endCalendar: outOfWorkTimeRecord.$rangeDaysEnd,
      type: 'date',
      inline: false,
      monthFirst: false,
      regExp: SemanticLocalization.regExp
    });
    outOfWorkTimeRecord.$rangeDaysEnd.calendar({
      firstDayOfWeek: SemanticLocalization.calendarFirstDayOfWeek,
      text: SemanticLocalization.calendarText,
      startCalendar: outOfWorkTimeRecord.$rangeDaysStart,
      type: 'date',
      inline: false,
      monthFirst: false,
      regExp: SemanticLocalization.regExp,
      onChange: function onChange(newDateTo) {
        var oldDateTo = outOfWorkTimeRecord.$date_to.attr('value');

        if (newDateTo !== null && oldDateTo !== '') {
          oldDateTo = new Date(oldDateTo * 1000);

          if (newDateTo - oldDateTo !== 0) {
            outOfWorkTimeRecord.$date_from.trigger('change');
          }
        }
      }
    });
    outOfWorkTimeRecord.$rangeTimeStart.calendar({
      firstDayOfWeek: SemanticLocalization.calendarFirstDayOfWeek,
      text: SemanticLocalization.calendarText,
      endCalendar: outOfWorkTimeRecord.$rangeTimeEnd,
      type: 'time',
      inline: false,
      disableMinute: true,
      ampm: false
    });
    outOfWorkTimeRecord.$rangeTimeEnd.calendar({
      firstDayOfWeek: SemanticLocalization.calendarFirstDayOfWeek,
      text: SemanticLocalization.calendarText,
      type: 'time',
      inline: false,
      disableMinute: true,
      ampm: false,
      onChange: function onChange(newTimeTo) {
        var oldTimeTo = outOfWorkTimeRecord.$time_to.attr('value');

        if (newTimeTo !== null && oldTimeTo !== '') {
          oldTimeTo = new Date(oldTimeTo * 1000);

          if (newTimeTo - oldTimeTo !== 0) {
            outOfWorkTimeRecord.$time_to.trigger('change');
          }
        }
      }
    });
    $('#action').dropdown({
      onChange: function onChange() {
        outOfWorkTimeRecord.toggleDisabledFieldClass();
      }
    });
    $('#weekday_from').dropdown({
      onChange: function onChange() {
        var from = outOfWorkTimeRecord.$formObj.form('get value', 'weekday_from');
        var to = outOfWorkTimeRecord.$formObj.form('get value', 'weekday_to');

        if (from < to || to === -1 || from === -1) {
          outOfWorkTimeRecord.$formObj.form('set value', 'weekday_to', from);
        }
      }
    });
    $('#weekday_to').dropdown({
      onChange: function onChange() {
        var from = outOfWorkTimeRecord.$formObj.form('get value', 'weekday_from');
        var to = outOfWorkTimeRecord.$formObj.form('get value', 'weekday_to');

        if (to < from || from === -1) {
          outOfWorkTimeRecord.$formObj.form('set value', 'weekday_from', to);
        }
      }
    });
    $('#erase-dates').on('click', function (e) {
      outOfWorkTimeRecord.$rangeDaysStart.calendar('clear');
      outOfWorkTimeRecord.$rangeDaysEnd.calendar('clear');
      outOfWorkTimeRecord.$formObj.form('set values', {
        date_from: '',
        date_to: ''
      });
      e.preventDefault();
    });
    $('#erase-weekdays').on('click', function (e) {
      outOfWorkTimeRecord.$formObj.form('set values', {
        weekday_from: -1,
        weekday_to: -1
      });
      outOfWorkTimeRecord.$rangeDaysStart.trigger('change');
      e.preventDefault();
    });
    $('#erase-timeperiod').on('click', function (e) {
      outOfWorkTimeRecord.$rangeTimeStart.calendar('clear');
      outOfWorkTimeRecord.$rangeTimeEnd.calendar('clear');
      outOfWorkTimeRecord.$time_to.trigger('change');
      e.preventDefault();
    });
    $('#save-outoffwork-form .audio-message-select').dropdown(SoundFilesSelector.getDropdownSettingsWithEmpty());
    outOfWorkTimeRecord.initializeForm();
    outOfWorkTimeRecord.$forwardingSelectDropdown.dropdown(Extensions.getDropdownSettingsWithoutEmpty());
    outOfWorkTimeRecord.toggleDisabledFieldClass();
    outOfWorkTimeRecord.changeDateFormat();
    $('#inbound-rules-table .ui.checkbox').checkbox({
      onChange: function onChange() {
        if ($(this).parent().checkbox('is checked')) {
          $('#inbound-rules-table .ui.checkbox[data-did=' + $(this).parent().attr('data-did') + ']').checkbox('set checked');
        } else {
          $('#inbound-rules-table .ui.checkbox[data-did=' + $(this).parent().attr('data-did') + ']').checkbox('set unchecked');
        }
      }
    });
    $('#allowRestriction').parent().checkbox({
      onChange: outOfWorkTimeRecord.changeRestriction
    });
    outOfWorkTimeRecord.changeRestriction();
  },
  changeRestriction: function changeRestriction() {
    if ($('#allowRestriction').parent().checkbox('is checked')) {
      $("a[data-tab='rules']").show();
    } else {
      $("a[data-tab='rules']").hide();
    }
  },

  /**
   * Меняет представление даты начала и даты окончания из linuxtime в локальное представление
   */
  changeDateFormat: function changeDateFormat() {
    var dateFrom = outOfWorkTimeRecord.$date_from.attr('value');
    var dateTo = outOfWorkTimeRecord.$date_to.attr('value');

    if (dateFrom !== undefined && dateFrom.length > 0) {
      outOfWorkTimeRecord.$rangeDaysStart.calendar('set date', new Date(dateFrom * 1000)); // outOfWorkTimeRecord.$formObj.form('set value', 'date_from', dateFrom);
    }

    if (dateTo !== undefined && dateTo.length > 0) {
      outOfWorkTimeRecord.$rangeDaysEnd.calendar('set date', new Date(dateTo * 1000)); // outOfWorkTimeRecord.$formObj.form('set value', 'date_to', dateTo);
    }
  },
  toggleDisabledFieldClass: function toggleDisabledFieldClass() {
    if (outOfWorkTimeRecord.$formObj.form('get value', 'action') === 'extension') {
      $('#extension-group').show();
      $('#audio-file-group').hide();
      $('#audio_message_id').dropdown('clear');
    } else {
      $('#extension-group').hide();
      $('#audio-file-group').show();
      outOfWorkTimeRecord.$formObj.form('set value', 'extension', -1);
    }
  },

  /**
   * Кастомная проверка полей формы, которые не получается сделать через валидацию
   * @param result
   * @returns {*}
   */
  customValidateForm: function customValidateForm(result) {
    // Проверим поля даты
    if (result.data.date_from !== '' && result.data.date_to === '' || result.data.date_to !== '' && result.data.date_from === '') {
      $('.form .error.message').html(globalTranslate.tf_ValidateCheckDateInterval).show();
      Form.$submitButton.transition('shake').removeClass('loading disabled');
      return false;
    } // Проверим поля дней недели


    if (result.data.weekday_from > 0 && result.data.weekday_to === '-1' || result.data.weekday_to > 0 && result.data.weekday_from === '-1') {
      $('.form .error.message').html(globalTranslate.tf_ValidateCheckWeekDayInterval).show();
      Form.$submitButton.transition('shake').removeClass('loading disabled');
      return false;
    } // Проверим поля времени


    if (result.data.time_from.length > 0 && result.data.time_to.length === 0 || result.data.time_to.length > 0 && result.data.time_from.length === 0) {
      $('.form .error.message').html(globalTranslate.tf_ValidateCheckTimeInterval).show();
      Form.$submitButton.transition('shake').removeClass('loading disabled');
      return false;
    } // Проверим поля времени на соблюдение формату


    if (result.data.time_from.length > 0 && result.data.time_to.length === 0 || result.data.time_to.length > 0 && result.data.time_from.length === 0) {
      $('.form .error.message').html(globalTranslate.tf_ValidateCheckTimeInterval).show();
      Form.$submitButton.transition('shake').removeClass('loading disabled');
      return false;
    } // Проверим все поля


    if (result.data.time_from === '' && result.data.time_to === '' && result.data.weekday_from === '-1' && result.data.weekday_to === '-1' && result.data.date_from === '' && result.data.date_to === '') {
      $('.form .error.message').html(globalTranslate.tf_ValidateNoRulesSelected).show();
      Form.$submitButton.transition('shake').removeClass('loading disabled');
      return false;
    }

    return result;
  },
  cbBeforeSendForm: function cbBeforeSendForm(settings) {
    var result = settings;
    $('.form .error.message').html('').hide();
    result.data = outOfWorkTimeRecord.$formObj.form('get values');
    var dateFrom = outOfWorkTimeRecord.$rangeDaysStart.calendar('get date');

    if (dateFrom !== null) {
      dateFrom.setHours(0, 0, 0, 0);
      result.data.date_from = Math.round(dateFrom.getTime() / 1000);
    }

    var dateTo = outOfWorkTimeRecord.$rangeDaysEnd.calendar('get date');

    if (dateTo !== null) {
      dateTo.setHours(23, 59, 59, 0);
      result.data.date_to = Math.round(dateTo.getTime() / 1000);
    }

    return outOfWorkTimeRecord.customValidateForm(result);
  },
  cbAfterSendForm: function cbAfterSendForm() {},
  initializeForm: function initializeForm() {
    Form.$formObj = outOfWorkTimeRecord.$formObj;
    Form.url = "".concat(globalRootUrl, "out-off-work-time/save");
    Form.validateRules = outOfWorkTimeRecord.validateRules;
    Form.cbBeforeSendForm = outOfWorkTimeRecord.cbBeforeSendForm;
    Form.cbAfterSendForm = outOfWorkTimeRecord.cbAfterSendForm;
    Form.initialize();
  }
};
$(document).ready(function () {
  outOfWorkTimeRecord.initialize();
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9PdXRPZmZXb3JrVGltZS9vdXQtb2Ytd29yay10aW1lLW1vZGlmeS5qcyJdLCJuYW1lcyI6WyIkIiwiZm4iLCJmb3JtIiwic2V0dGluZ3MiLCJydWxlcyIsImN1c3RvbU5vdEVtcHR5SWZBY3Rpb25SdWxlIiwidmFsdWUiLCJhY3Rpb24iLCJsZW5ndGgiLCJ2YWwiLCJvdXRPZldvcmtUaW1lUmVjb3JkIiwiJGZvcm1PYmoiLCIkZGVmYXVsdERyb3Bkb3duIiwiJHJhbmdlRGF5c1N0YXJ0IiwiJHJhbmdlRGF5c0VuZCIsIiRyYW5nZVRpbWVTdGFydCIsIiRyYW5nZVRpbWVFbmQiLCIkZGF0ZV9mcm9tIiwiJGRhdGVfdG8iLCIkdGltZV90byIsIiRmb3J3YXJkaW5nU2VsZWN0RHJvcGRvd24iLCJ2YWxpZGF0ZVJ1bGVzIiwiYXVkaW9fbWVzc2FnZV9pZCIsImlkZW50aWZpZXIiLCJ0eXBlIiwicHJvbXB0IiwiZ2xvYmFsVHJhbnNsYXRlIiwidGZfVmFsaWRhdGVBdWRpb01lc3NhZ2VFbXB0eSIsImV4dGVuc2lvbiIsInRmX1ZhbGlkYXRlRXh0ZW5zaW9uRW1wdHkiLCJ0aW1lZnJvbSIsIm9wdGlvbmFsIiwidGZfVmFsaWRhdGVDaGVja1RpbWVJbnRlcnZhbCIsInRpbWV0byIsImluaXRpYWxpemUiLCJ0YWIiLCJkcm9wZG93biIsImNhbGVuZGFyIiwiZmlyc3REYXlPZldlZWsiLCJTZW1hbnRpY0xvY2FsaXphdGlvbiIsImNhbGVuZGFyRmlyc3REYXlPZldlZWsiLCJ0ZXh0IiwiY2FsZW5kYXJUZXh0IiwiZW5kQ2FsZW5kYXIiLCJpbmxpbmUiLCJtb250aEZpcnN0IiwicmVnRXhwIiwic3RhcnRDYWxlbmRhciIsIm9uQ2hhbmdlIiwibmV3RGF0ZVRvIiwib2xkRGF0ZVRvIiwiYXR0ciIsIkRhdGUiLCJ0cmlnZ2VyIiwiZGlzYWJsZU1pbnV0ZSIsImFtcG0iLCJuZXdUaW1lVG8iLCJvbGRUaW1lVG8iLCJ0b2dnbGVEaXNhYmxlZEZpZWxkQ2xhc3MiLCJmcm9tIiwidG8iLCJvbiIsImUiLCJkYXRlX2Zyb20iLCJkYXRlX3RvIiwicHJldmVudERlZmF1bHQiLCJ3ZWVrZGF5X2Zyb20iLCJ3ZWVrZGF5X3RvIiwiU291bmRGaWxlc1NlbGVjdG9yIiwiZ2V0RHJvcGRvd25TZXR0aW5nc1dpdGhFbXB0eSIsImluaXRpYWxpemVGb3JtIiwiRXh0ZW5zaW9ucyIsImdldERyb3Bkb3duU2V0dGluZ3NXaXRob3V0RW1wdHkiLCJjaGFuZ2VEYXRlRm9ybWF0IiwiY2hlY2tib3giLCJwYXJlbnQiLCJjaGFuZ2VSZXN0cmljdGlvbiIsInNob3ciLCJoaWRlIiwiZGF0ZUZyb20iLCJkYXRlVG8iLCJ1bmRlZmluZWQiLCJjdXN0b21WYWxpZGF0ZUZvcm0iLCJyZXN1bHQiLCJkYXRhIiwiaHRtbCIsInRmX1ZhbGlkYXRlQ2hlY2tEYXRlSW50ZXJ2YWwiLCJGb3JtIiwiJHN1Ym1pdEJ1dHRvbiIsInRyYW5zaXRpb24iLCJyZW1vdmVDbGFzcyIsInRmX1ZhbGlkYXRlQ2hlY2tXZWVrRGF5SW50ZXJ2YWwiLCJ0aW1lX2Zyb20iLCJ0aW1lX3RvIiwidGZfVmFsaWRhdGVOb1J1bGVzU2VsZWN0ZWQiLCJjYkJlZm9yZVNlbmRGb3JtIiwic2V0SG91cnMiLCJNYXRoIiwicm91bmQiLCJnZXRUaW1lIiwiY2JBZnRlclNlbmRGb3JtIiwidXJsIiwiZ2xvYmFsUm9vdFVybCIsImRvY3VtZW50IiwicmVhZHkiXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUdBQSxDQUFDLENBQUNDLEVBQUYsQ0FBS0MsSUFBTCxDQUFVQyxRQUFWLENBQW1CQyxLQUFuQixDQUF5QkMsMEJBQXpCLEdBQXNELFVBQUNDLEtBQUQsRUFBUUMsTUFBUixFQUFtQjtBQUN4RSxNQUFJRCxLQUFLLENBQUNFLE1BQU4sS0FBaUIsQ0FBakIsSUFBc0JSLENBQUMsQ0FBQyxTQUFELENBQUQsQ0FBYVMsR0FBYixPQUF1QkYsTUFBakQsRUFBeUQ7QUFDeEQsV0FBTyxLQUFQO0FBQ0E7O0FBQ0QsU0FBTyxJQUFQO0FBQ0EsQ0FMRDs7QUFPQSxJQUFNRyxtQkFBbUIsR0FBRztBQUMzQkMsRUFBQUEsUUFBUSxFQUFFWCxDQUFDLENBQUMsdUJBQUQsQ0FEZ0I7QUFFM0JZLEVBQUFBLGdCQUFnQixFQUFFWixDQUFDLENBQUMseUNBQUQsQ0FGUTtBQUczQmEsRUFBQUEsZUFBZSxFQUFFYixDQUFDLENBQUMsbUJBQUQsQ0FIUztBQUkzQmMsRUFBQUEsYUFBYSxFQUFFZCxDQUFDLENBQUMsaUJBQUQsQ0FKVztBQUszQmUsRUFBQUEsZUFBZSxFQUFFZixDQUFDLENBQUMsbUJBQUQsQ0FMUztBQU0zQmdCLEVBQUFBLGFBQWEsRUFBRWhCLENBQUMsQ0FBQyxpQkFBRCxDQU5XO0FBTzNCaUIsRUFBQUEsVUFBVSxFQUFFakIsQ0FBQyxDQUFDLFlBQUQsQ0FQYztBQVEzQmtCLEVBQUFBLFFBQVEsRUFBRWxCLENBQUMsQ0FBQyxVQUFELENBUmdCO0FBUzNCbUIsRUFBQUEsUUFBUSxFQUFFbkIsQ0FBQyxDQUFDLFVBQUQsQ0FUZ0I7QUFVM0JvQixFQUFBQSx5QkFBeUIsRUFBRXBCLENBQUMsQ0FBQywwQ0FBRCxDQVZEO0FBVzNCcUIsRUFBQUEsYUFBYSxFQUFFO0FBQ2RDLElBQUFBLGdCQUFnQixFQUFFO0FBQ2pCQyxNQUFBQSxVQUFVLEVBQUUsa0JBREs7QUFFakJuQixNQUFBQSxLQUFLLEVBQUUsQ0FDTjtBQUNDb0IsUUFBQUEsSUFBSSxFQUFFLHlDQURQO0FBRUNDLFFBQUFBLE1BQU0sRUFBRUMsZUFBZSxDQUFDQztBQUZ6QixPQURNO0FBRlUsS0FESjtBQVVkQyxJQUFBQSxTQUFTLEVBQUU7QUFDVkwsTUFBQUEsVUFBVSxFQUFFLFdBREY7QUFFVm5CLE1BQUFBLEtBQUssRUFBRSxDQUNOO0FBQ0NvQixRQUFBQSxJQUFJLEVBQUUsdUNBRFA7QUFFQ0MsUUFBQUEsTUFBTSxFQUFFQyxlQUFlLENBQUNHO0FBRnpCLE9BRE07QUFGRyxLQVZHO0FBbUJkQyxJQUFBQSxRQUFRLEVBQUU7QUFDVEMsTUFBQUEsUUFBUSxFQUFFLElBREQ7QUFFVFIsTUFBQUEsVUFBVSxFQUFFLFdBRkg7QUFHVG5CLE1BQUFBLEtBQUssRUFBRSxDQUFDO0FBQ1BvQixRQUFBQSxJQUFJLEVBQUUsUUFEQztBQUVQbEIsUUFBQUEsS0FBSyxFQUFFLGtDQUZBO0FBR1BtQixRQUFBQSxNQUFNLEVBQUVDLGVBQWUsQ0FBQ007QUFIakIsT0FBRDtBQUhFLEtBbkJJO0FBNEJkQyxJQUFBQSxNQUFNLEVBQUU7QUFDUFYsTUFBQUEsVUFBVSxFQUFFLFNBREw7QUFFUFEsTUFBQUEsUUFBUSxFQUFFLElBRkg7QUFHUDNCLE1BQUFBLEtBQUssRUFBRSxDQUFDO0FBQ1BvQixRQUFBQSxJQUFJLEVBQUUsUUFEQztBQUVQbEIsUUFBQUEsS0FBSyxFQUFFLGtDQUZBO0FBR1BtQixRQUFBQSxNQUFNLEVBQUVDLGVBQWUsQ0FBQ007QUFIakIsT0FBRDtBQUhBO0FBNUJNLEdBWFk7QUFpRDNCRSxFQUFBQSxVQWpEMkIsd0JBaURkO0FBQ1psQyxJQUFBQSxDQUFDLENBQUMsNkJBQUQsQ0FBRCxDQUFpQ21DLEdBQWpDO0FBQ0F6QixJQUFBQSxtQkFBbUIsQ0FBQ0UsZ0JBQXBCLENBQXFDd0IsUUFBckM7QUFDQTFCLElBQUFBLG1CQUFtQixDQUFDRyxlQUFwQixDQUFvQ3dCLFFBQXBDLENBQTZDO0FBQzVDQyxNQUFBQSxjQUFjLEVBQUVDLG9CQUFvQixDQUFDQyxzQkFETztBQUU1Q0MsTUFBQUEsSUFBSSxFQUFFRixvQkFBb0IsQ0FBQ0csWUFGaUI7QUFHNUNDLE1BQUFBLFdBQVcsRUFBRWpDLG1CQUFtQixDQUFDSSxhQUhXO0FBSTVDVSxNQUFBQSxJQUFJLEVBQUUsTUFKc0M7QUFLNUNvQixNQUFBQSxNQUFNLEVBQUUsS0FMb0M7QUFNNUNDLE1BQUFBLFVBQVUsRUFBRSxLQU5nQztBQU81Q0MsTUFBQUEsTUFBTSxFQUFFUCxvQkFBb0IsQ0FBQ087QUFQZSxLQUE3QztBQVNBcEMsSUFBQUEsbUJBQW1CLENBQUNJLGFBQXBCLENBQWtDdUIsUUFBbEMsQ0FBMkM7QUFDMUNDLE1BQUFBLGNBQWMsRUFBRUMsb0JBQW9CLENBQUNDLHNCQURLO0FBRTFDQyxNQUFBQSxJQUFJLEVBQUVGLG9CQUFvQixDQUFDRyxZQUZlO0FBRzFDSyxNQUFBQSxhQUFhLEVBQUVyQyxtQkFBbUIsQ0FBQ0csZUFITztBQUkxQ1csTUFBQUEsSUFBSSxFQUFFLE1BSm9DO0FBSzFDb0IsTUFBQUEsTUFBTSxFQUFFLEtBTGtDO0FBTTFDQyxNQUFBQSxVQUFVLEVBQUUsS0FOOEI7QUFPMUNDLE1BQUFBLE1BQU0sRUFBRVAsb0JBQW9CLENBQUNPLE1BUGE7QUFRMUNFLE1BQUFBLFFBQVEsRUFBRSxrQkFBQ0MsU0FBRCxFQUFlO0FBQ3hCLFlBQUlDLFNBQVMsR0FBR3hDLG1CQUFtQixDQUFDUSxRQUFwQixDQUE2QmlDLElBQTdCLENBQWtDLE9BQWxDLENBQWhCOztBQUNBLFlBQUlGLFNBQVMsS0FBSyxJQUFkLElBQXNCQyxTQUFTLEtBQUssRUFBeEMsRUFBNEM7QUFDM0NBLFVBQUFBLFNBQVMsR0FBRyxJQUFJRSxJQUFKLENBQVNGLFNBQVMsR0FBRyxJQUFyQixDQUFaOztBQUNBLGNBQUtELFNBQVMsR0FBR0MsU0FBYixLQUE0QixDQUFoQyxFQUFtQztBQUNsQ3hDLFlBQUFBLG1CQUFtQixDQUFDTyxVQUFwQixDQUErQm9DLE9BQS9CLENBQXVDLFFBQXZDO0FBQ0E7QUFDRDtBQUNEO0FBaEJ5QyxLQUEzQztBQWtCQTNDLElBQUFBLG1CQUFtQixDQUFDSyxlQUFwQixDQUFvQ3NCLFFBQXBDLENBQTZDO0FBQzVDQyxNQUFBQSxjQUFjLEVBQUVDLG9CQUFvQixDQUFDQyxzQkFETztBQUU1Q0MsTUFBQUEsSUFBSSxFQUFFRixvQkFBb0IsQ0FBQ0csWUFGaUI7QUFHNUNDLE1BQUFBLFdBQVcsRUFBRWpDLG1CQUFtQixDQUFDTSxhQUhXO0FBSTVDUSxNQUFBQSxJQUFJLEVBQUUsTUFKc0M7QUFLNUNvQixNQUFBQSxNQUFNLEVBQUUsS0FMb0M7QUFNNUNVLE1BQUFBLGFBQWEsRUFBRSxJQU42QjtBQU81Q0MsTUFBQUEsSUFBSSxFQUFFO0FBUHNDLEtBQTdDO0FBU0E3QyxJQUFBQSxtQkFBbUIsQ0FBQ00sYUFBcEIsQ0FBa0NxQixRQUFsQyxDQUEyQztBQUMxQ0MsTUFBQUEsY0FBYyxFQUFFQyxvQkFBb0IsQ0FBQ0Msc0JBREs7QUFFMUNDLE1BQUFBLElBQUksRUFBRUYsb0JBQW9CLENBQUNHLFlBRmU7QUFHMUNsQixNQUFBQSxJQUFJLEVBQUUsTUFIb0M7QUFJMUNvQixNQUFBQSxNQUFNLEVBQUUsS0FKa0M7QUFLMUNVLE1BQUFBLGFBQWEsRUFBRSxJQUwyQjtBQU0xQ0MsTUFBQUEsSUFBSSxFQUFFLEtBTm9DO0FBTzFDUCxNQUFBQSxRQUFRLEVBQUUsa0JBQUNRLFNBQUQsRUFBZTtBQUN4QixZQUFJQyxTQUFTLEdBQUcvQyxtQkFBbUIsQ0FBQ1MsUUFBcEIsQ0FBNkJnQyxJQUE3QixDQUFrQyxPQUFsQyxDQUFoQjs7QUFDQSxZQUFJSyxTQUFTLEtBQUssSUFBZCxJQUFzQkMsU0FBUyxLQUFLLEVBQXhDLEVBQTRDO0FBQzNDQSxVQUFBQSxTQUFTLEdBQUcsSUFBSUwsSUFBSixDQUFTSyxTQUFTLEdBQUcsSUFBckIsQ0FBWjs7QUFDQSxjQUFLRCxTQUFTLEdBQUdDLFNBQWIsS0FBNEIsQ0FBaEMsRUFBbUM7QUFDbEMvQyxZQUFBQSxtQkFBbUIsQ0FBQ1MsUUFBcEIsQ0FBNkJrQyxPQUE3QixDQUFxQyxRQUFyQztBQUNBO0FBQ0Q7QUFDRDtBQWZ5QyxLQUEzQztBQWlCQXJELElBQUFBLENBQUMsQ0FBQyxTQUFELENBQUQsQ0FDRW9DLFFBREYsQ0FDVztBQUNUWSxNQUFBQSxRQURTLHNCQUNFO0FBQ1Z0QyxRQUFBQSxtQkFBbUIsQ0FBQ2dELHdCQUFwQjtBQUNBO0FBSFEsS0FEWDtBQU1BMUQsSUFBQUEsQ0FBQyxDQUFDLGVBQUQsQ0FBRCxDQUNFb0MsUUFERixDQUNXO0FBQ1RZLE1BQUFBLFFBRFMsc0JBQ0U7QUFDVixZQUFNVyxJQUFJLEdBQUdqRCxtQkFBbUIsQ0FBQ0MsUUFBcEIsQ0FBNkJULElBQTdCLENBQWtDLFdBQWxDLEVBQStDLGNBQS9DLENBQWI7QUFDQSxZQUFNMEQsRUFBRSxHQUFHbEQsbUJBQW1CLENBQUNDLFFBQXBCLENBQTZCVCxJQUE3QixDQUFrQyxXQUFsQyxFQUErQyxZQUEvQyxDQUFYOztBQUNBLFlBQUl5RCxJQUFJLEdBQUdDLEVBQVAsSUFBYUEsRUFBRSxLQUFLLENBQUMsQ0FBckIsSUFBMEJELElBQUksS0FBSyxDQUFDLENBQXhDLEVBQTJDO0FBQzFDakQsVUFBQUEsbUJBQW1CLENBQUNDLFFBQXBCLENBQTZCVCxJQUE3QixDQUFrQyxXQUFsQyxFQUErQyxZQUEvQyxFQUE2RHlELElBQTdEO0FBQ0E7QUFDRDtBQVBRLEtBRFg7QUFVQTNELElBQUFBLENBQUMsQ0FBQyxhQUFELENBQUQsQ0FDRW9DLFFBREYsQ0FDVztBQUNUWSxNQUFBQSxRQURTLHNCQUNFO0FBQ1YsWUFBTVcsSUFBSSxHQUFHakQsbUJBQW1CLENBQUNDLFFBQXBCLENBQTZCVCxJQUE3QixDQUFrQyxXQUFsQyxFQUErQyxjQUEvQyxDQUFiO0FBQ0EsWUFBTTBELEVBQUUsR0FBR2xELG1CQUFtQixDQUFDQyxRQUFwQixDQUE2QlQsSUFBN0IsQ0FBa0MsV0FBbEMsRUFBK0MsWUFBL0MsQ0FBWDs7QUFDQSxZQUFJMEQsRUFBRSxHQUFHRCxJQUFMLElBQWFBLElBQUksS0FBSyxDQUFDLENBQTNCLEVBQThCO0FBQzdCakQsVUFBQUEsbUJBQW1CLENBQUNDLFFBQXBCLENBQTZCVCxJQUE3QixDQUFrQyxXQUFsQyxFQUErQyxjQUEvQyxFQUErRDBELEVBQS9EO0FBQ0E7QUFDRDtBQVBRLEtBRFg7QUFXQTVELElBQUFBLENBQUMsQ0FBQyxjQUFELENBQUQsQ0FBa0I2RCxFQUFsQixDQUFxQixPQUFyQixFQUE4QixVQUFDQyxDQUFELEVBQU87QUFDcENwRCxNQUFBQSxtQkFBbUIsQ0FBQ0csZUFBcEIsQ0FBb0N3QixRQUFwQyxDQUE2QyxPQUE3QztBQUNBM0IsTUFBQUEsbUJBQW1CLENBQUNJLGFBQXBCLENBQWtDdUIsUUFBbEMsQ0FBMkMsT0FBM0M7QUFDQTNCLE1BQUFBLG1CQUFtQixDQUFDQyxRQUFwQixDQUNFVCxJQURGLENBQ08sWUFEUCxFQUNxQjtBQUNuQjZELFFBQUFBLFNBQVMsRUFBRSxFQURRO0FBRW5CQyxRQUFBQSxPQUFPLEVBQUU7QUFGVSxPQURyQjtBQUtBRixNQUFBQSxDQUFDLENBQUNHLGNBQUY7QUFDQSxLQVREO0FBV0FqRSxJQUFBQSxDQUFDLENBQUMsaUJBQUQsQ0FBRCxDQUFxQjZELEVBQXJCLENBQXdCLE9BQXhCLEVBQWlDLFVBQUNDLENBQUQsRUFBTztBQUN2Q3BELE1BQUFBLG1CQUFtQixDQUFDQyxRQUFwQixDQUNFVCxJQURGLENBQ08sWUFEUCxFQUNxQjtBQUNuQmdFLFFBQUFBLFlBQVksRUFBRSxDQUFDLENBREk7QUFFbkJDLFFBQUFBLFVBQVUsRUFBRSxDQUFDO0FBRk0sT0FEckI7QUFLQXpELE1BQUFBLG1CQUFtQixDQUFDRyxlQUFwQixDQUFvQ3dDLE9BQXBDLENBQTRDLFFBQTVDO0FBQ0FTLE1BQUFBLENBQUMsQ0FBQ0csY0FBRjtBQUNBLEtBUkQ7QUFTQWpFLElBQUFBLENBQUMsQ0FBQyxtQkFBRCxDQUFELENBQXVCNkQsRUFBdkIsQ0FBMEIsT0FBMUIsRUFBbUMsVUFBQ0MsQ0FBRCxFQUFPO0FBQ3pDcEQsTUFBQUEsbUJBQW1CLENBQUNLLGVBQXBCLENBQW9Dc0IsUUFBcEMsQ0FBNkMsT0FBN0M7QUFDQTNCLE1BQUFBLG1CQUFtQixDQUFDTSxhQUFwQixDQUFrQ3FCLFFBQWxDLENBQTJDLE9BQTNDO0FBQ0EzQixNQUFBQSxtQkFBbUIsQ0FBQ1MsUUFBcEIsQ0FBNkJrQyxPQUE3QixDQUFxQyxRQUFyQztBQUNBUyxNQUFBQSxDQUFDLENBQUNHLGNBQUY7QUFDQSxLQUxEO0FBT0FqRSxJQUFBQSxDQUFDLENBQUMsNkNBQUQsQ0FBRCxDQUFpRG9DLFFBQWpELENBQTBEZ0Msa0JBQWtCLENBQUNDLDRCQUFuQixFQUExRDtBQUVBM0QsSUFBQUEsbUJBQW1CLENBQUM0RCxjQUFwQjtBQUNBNUQsSUFBQUEsbUJBQW1CLENBQUNVLHlCQUFwQixDQUE4Q2dCLFFBQTlDLENBQXVEbUMsVUFBVSxDQUFDQywrQkFBWCxFQUF2RDtBQUNBOUQsSUFBQUEsbUJBQW1CLENBQUNnRCx3QkFBcEI7QUFDQWhELElBQUFBLG1CQUFtQixDQUFDK0QsZ0JBQXBCO0FBRUF6RSxJQUFBQSxDQUFDLENBQUMsbUNBQUQsQ0FBRCxDQUF1QzBFLFFBQXZDLENBQWdEO0FBQy9DMUIsTUFBQUEsUUFBUSxFQUFFLG9CQUFXO0FBQ3BCLFlBQUdoRCxDQUFDLENBQUMsSUFBRCxDQUFELENBQVEyRSxNQUFSLEdBQWlCRCxRQUFqQixDQUEwQixZQUExQixDQUFILEVBQTJDO0FBQzFDMUUsVUFBQUEsQ0FBQyxDQUFDLGdEQUE4Q0EsQ0FBQyxDQUFDLElBQUQsQ0FBRCxDQUFRMkUsTUFBUixHQUFpQnhCLElBQWpCLENBQXNCLFVBQXRCLENBQTlDLEdBQWdGLEdBQWpGLENBQUQsQ0FBdUZ1QixRQUF2RixDQUFnRyxhQUFoRztBQUNBLFNBRkQsTUFFSztBQUNKMUUsVUFBQUEsQ0FBQyxDQUFDLGdEQUE4Q0EsQ0FBQyxDQUFDLElBQUQsQ0FBRCxDQUFRMkUsTUFBUixHQUFpQnhCLElBQWpCLENBQXNCLFVBQXRCLENBQTlDLEdBQWdGLEdBQWpGLENBQUQsQ0FBdUZ1QixRQUF2RixDQUFnRyxlQUFoRztBQUNBO0FBQ0Q7QUFQOEMsS0FBaEQ7QUFTQTFFLElBQUFBLENBQUMsQ0FBQyxtQkFBRCxDQUFELENBQXVCMkUsTUFBdkIsR0FBZ0NELFFBQWhDLENBQXlDO0FBQ3hDMUIsTUFBQUEsUUFBUSxFQUFFdEMsbUJBQW1CLENBQUNrRTtBQURVLEtBQXpDO0FBR0FsRSxJQUFBQSxtQkFBbUIsQ0FBQ2tFLGlCQUFwQjtBQUNBLEdBbkwwQjtBQW9MM0JBLEVBQUFBLGlCQXBMMkIsK0JBb0xSO0FBQ2xCLFFBQUc1RSxDQUFDLENBQUMsbUJBQUQsQ0FBRCxDQUF1QjJFLE1BQXZCLEdBQWdDRCxRQUFoQyxDQUF5QyxZQUF6QyxDQUFILEVBQTBEO0FBQ3pEMUUsTUFBQUEsQ0FBQyxDQUFDLHFCQUFELENBQUQsQ0FBeUI2RSxJQUF6QjtBQUNBLEtBRkQsTUFFSztBQUNKN0UsTUFBQUEsQ0FBQyxDQUFDLHFCQUFELENBQUQsQ0FBeUI4RSxJQUF6QjtBQUNBO0FBQ0QsR0ExTDBCOztBQTJMM0I7QUFDRDtBQUNBO0FBQ0NMLEVBQUFBLGdCQTlMMkIsOEJBOExSO0FBQ2xCLFFBQU1NLFFBQVEsR0FBR3JFLG1CQUFtQixDQUFDTyxVQUFwQixDQUErQmtDLElBQS9CLENBQW9DLE9BQXBDLENBQWpCO0FBQ0EsUUFBTTZCLE1BQU0sR0FBR3RFLG1CQUFtQixDQUFDUSxRQUFwQixDQUE2QmlDLElBQTdCLENBQWtDLE9BQWxDLENBQWY7O0FBQ0EsUUFBSTRCLFFBQVEsS0FBS0UsU0FBYixJQUEwQkYsUUFBUSxDQUFDdkUsTUFBVCxHQUFrQixDQUFoRCxFQUFtRDtBQUNsREUsTUFBQUEsbUJBQW1CLENBQUNHLGVBQXBCLENBQW9Dd0IsUUFBcEMsQ0FBNkMsVUFBN0MsRUFBeUQsSUFBSWUsSUFBSixDQUFTMkIsUUFBUSxHQUFHLElBQXBCLENBQXpELEVBRGtELENBRWxEO0FBQ0E7O0FBQ0QsUUFBSUMsTUFBTSxLQUFLQyxTQUFYLElBQXdCRCxNQUFNLENBQUN4RSxNQUFQLEdBQWdCLENBQTVDLEVBQStDO0FBQzlDRSxNQUFBQSxtQkFBbUIsQ0FBQ0ksYUFBcEIsQ0FBa0N1QixRQUFsQyxDQUEyQyxVQUEzQyxFQUF1RCxJQUFJZSxJQUFKLENBQVM0QixNQUFNLEdBQUcsSUFBbEIsQ0FBdkQsRUFEOEMsQ0FFOUM7QUFDQTtBQUNELEdBek0wQjtBQTBNM0J0QixFQUFBQSx3QkExTTJCLHNDQTBNQTtBQUMxQixRQUFJaEQsbUJBQW1CLENBQUNDLFFBQXBCLENBQTZCVCxJQUE3QixDQUFrQyxXQUFsQyxFQUErQyxRQUEvQyxNQUE2RCxXQUFqRSxFQUE4RTtBQUM3RUYsTUFBQUEsQ0FBQyxDQUFDLGtCQUFELENBQUQsQ0FBc0I2RSxJQUF0QjtBQUNBN0UsTUFBQUEsQ0FBQyxDQUFDLG1CQUFELENBQUQsQ0FBdUI4RSxJQUF2QjtBQUNBOUUsTUFBQUEsQ0FBQyxDQUFDLG1CQUFELENBQUQsQ0FBdUJvQyxRQUF2QixDQUFnQyxPQUFoQztBQUNBLEtBSkQsTUFJTztBQUNOcEMsTUFBQUEsQ0FBQyxDQUFDLGtCQUFELENBQUQsQ0FBc0I4RSxJQUF0QjtBQUNBOUUsTUFBQUEsQ0FBQyxDQUFDLG1CQUFELENBQUQsQ0FBdUI2RSxJQUF2QjtBQUNBbkUsTUFBQUEsbUJBQW1CLENBQUNDLFFBQXBCLENBQTZCVCxJQUE3QixDQUFrQyxXQUFsQyxFQUErQyxXQUEvQyxFQUE0RCxDQUFDLENBQTdEO0FBQ0E7QUFDRCxHQXBOMEI7O0FBcU4zQjtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0NnRixFQUFBQSxrQkExTjJCLDhCQTBOUkMsTUExTlEsRUEwTkE7QUFDMUI7QUFDQSxRQUFLQSxNQUFNLENBQUNDLElBQVAsQ0FBWXJCLFNBQVosS0FBMEIsRUFBMUIsSUFBZ0NvQixNQUFNLENBQUNDLElBQVAsQ0FBWXBCLE9BQVosS0FBd0IsRUFBekQsSUFDQ21CLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZcEIsT0FBWixLQUF3QixFQUF4QixJQUE4Qm1CLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZckIsU0FBWixLQUEwQixFQUQ3RCxFQUNrRTtBQUNqRS9ELE1BQUFBLENBQUMsQ0FBQyxzQkFBRCxDQUFELENBQTBCcUYsSUFBMUIsQ0FBK0IzRCxlQUFlLENBQUM0RCw0QkFBL0MsRUFBNkVULElBQTdFO0FBQ0FVLE1BQUFBLElBQUksQ0FBQ0MsYUFBTCxDQUFtQkMsVUFBbkIsQ0FBOEIsT0FBOUIsRUFBdUNDLFdBQXZDLENBQW1ELGtCQUFuRDtBQUNBLGFBQU8sS0FBUDtBQUNBLEtBUHlCLENBUTFCOzs7QUFDQSxRQUFLUCxNQUFNLENBQUNDLElBQVAsQ0FBWWxCLFlBQVosR0FBMkIsQ0FBM0IsSUFBZ0NpQixNQUFNLENBQUNDLElBQVAsQ0FBWWpCLFVBQVosS0FBMkIsSUFBNUQsSUFDQ2dCLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZakIsVUFBWixHQUF5QixDQUF6QixJQUE4QmdCLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZbEIsWUFBWixLQUE2QixJQURoRSxFQUN1RTtBQUN0RWxFLE1BQUFBLENBQUMsQ0FBQyxzQkFBRCxDQUFELENBQTBCcUYsSUFBMUIsQ0FBK0IzRCxlQUFlLENBQUNpRSwrQkFBL0MsRUFBZ0ZkLElBQWhGO0FBQ0FVLE1BQUFBLElBQUksQ0FBQ0MsYUFBTCxDQUFtQkMsVUFBbkIsQ0FBOEIsT0FBOUIsRUFBdUNDLFdBQXZDLENBQW1ELGtCQUFuRDtBQUNBLGFBQU8sS0FBUDtBQUNBLEtBZHlCLENBZTFCOzs7QUFDQSxRQUFLUCxNQUFNLENBQUNDLElBQVAsQ0FBWVEsU0FBWixDQUFzQnBGLE1BQXRCLEdBQStCLENBQS9CLElBQW9DMkUsTUFBTSxDQUFDQyxJQUFQLENBQVlTLE9BQVosQ0FBb0JyRixNQUFwQixLQUErQixDQUFwRSxJQUNDMkUsTUFBTSxDQUFDQyxJQUFQLENBQVlTLE9BQVosQ0FBb0JyRixNQUFwQixHQUE2QixDQUE3QixJQUFrQzJFLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZUSxTQUFaLENBQXNCcEYsTUFBdEIsS0FBaUMsQ0FEeEUsRUFDNEU7QUFDM0VSLE1BQUFBLENBQUMsQ0FBQyxzQkFBRCxDQUFELENBQTBCcUYsSUFBMUIsQ0FBK0IzRCxlQUFlLENBQUNNLDRCQUEvQyxFQUE2RTZDLElBQTdFO0FBQ0FVLE1BQUFBLElBQUksQ0FBQ0MsYUFBTCxDQUFtQkMsVUFBbkIsQ0FBOEIsT0FBOUIsRUFBdUNDLFdBQXZDLENBQW1ELGtCQUFuRDtBQUVBLGFBQU8sS0FBUDtBQUNBLEtBdEJ5QixDQXVCMUI7OztBQUNBLFFBQUtQLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZUSxTQUFaLENBQXNCcEYsTUFBdEIsR0FBK0IsQ0FBL0IsSUFBb0MyRSxNQUFNLENBQUNDLElBQVAsQ0FBWVMsT0FBWixDQUFvQnJGLE1BQXBCLEtBQStCLENBQXBFLElBQ0MyRSxNQUFNLENBQUNDLElBQVAsQ0FBWVMsT0FBWixDQUFvQnJGLE1BQXBCLEdBQTZCLENBQTdCLElBQWtDMkUsTUFBTSxDQUFDQyxJQUFQLENBQVlRLFNBQVosQ0FBc0JwRixNQUF0QixLQUFpQyxDQUR4RSxFQUM0RTtBQUMzRVIsTUFBQUEsQ0FBQyxDQUFDLHNCQUFELENBQUQsQ0FBMEJxRixJQUExQixDQUErQjNELGVBQWUsQ0FBQ00sNEJBQS9DLEVBQTZFNkMsSUFBN0U7QUFDQVUsTUFBQUEsSUFBSSxDQUFDQyxhQUFMLENBQW1CQyxVQUFuQixDQUE4QixPQUE5QixFQUF1Q0MsV0FBdkMsQ0FBbUQsa0JBQW5EO0FBRUEsYUFBTyxLQUFQO0FBQ0EsS0E5QnlCLENBZ0MxQjs7O0FBQ0EsUUFBSVAsTUFBTSxDQUFDQyxJQUFQLENBQVlRLFNBQVosS0FBMEIsRUFBMUIsSUFDQVQsTUFBTSxDQUFDQyxJQUFQLENBQVlTLE9BQVosS0FBd0IsRUFEeEIsSUFFQVYsTUFBTSxDQUFDQyxJQUFQLENBQVlsQixZQUFaLEtBQTZCLElBRjdCLElBR0FpQixNQUFNLENBQUNDLElBQVAsQ0FBWWpCLFVBQVosS0FBMkIsSUFIM0IsSUFJQWdCLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZckIsU0FBWixLQUEwQixFQUoxQixJQUtBb0IsTUFBTSxDQUFDQyxJQUFQLENBQVlwQixPQUFaLEtBQXdCLEVBTDVCLEVBS2dDO0FBQy9CaEUsTUFBQUEsQ0FBQyxDQUFDLHNCQUFELENBQUQsQ0FBMEJxRixJQUExQixDQUErQjNELGVBQWUsQ0FBQ29FLDBCQUEvQyxFQUEyRWpCLElBQTNFO0FBQ0FVLE1BQUFBLElBQUksQ0FBQ0MsYUFBTCxDQUFtQkMsVUFBbkIsQ0FBOEIsT0FBOUIsRUFBdUNDLFdBQXZDLENBQW1ELGtCQUFuRDtBQUNBLGFBQU8sS0FBUDtBQUNBOztBQUNELFdBQU9QLE1BQVA7QUFDQSxHQXRRMEI7QUF1UTNCWSxFQUFBQSxnQkF2UTJCLDRCQXVRVjVGLFFBdlFVLEVBdVFBO0FBQzFCLFFBQU1nRixNQUFNLEdBQUdoRixRQUFmO0FBQ0FILElBQUFBLENBQUMsQ0FBQyxzQkFBRCxDQUFELENBQTBCcUYsSUFBMUIsQ0FBK0IsRUFBL0IsRUFBbUNQLElBQW5DO0FBQ0FLLElBQUFBLE1BQU0sQ0FBQ0MsSUFBUCxHQUFjMUUsbUJBQW1CLENBQUNDLFFBQXBCLENBQTZCVCxJQUE3QixDQUFrQyxZQUFsQyxDQUFkO0FBQ0EsUUFBTTZFLFFBQVEsR0FBR3JFLG1CQUFtQixDQUFDRyxlQUFwQixDQUFvQ3dCLFFBQXBDLENBQTZDLFVBQTdDLENBQWpCOztBQUNBLFFBQUkwQyxRQUFRLEtBQUssSUFBakIsRUFBdUI7QUFDdEJBLE1BQUFBLFFBQVEsQ0FBQ2lCLFFBQVQsQ0FBa0IsQ0FBbEIsRUFBcUIsQ0FBckIsRUFBd0IsQ0FBeEIsRUFBMkIsQ0FBM0I7QUFDQWIsTUFBQUEsTUFBTSxDQUFDQyxJQUFQLENBQVlyQixTQUFaLEdBQXdCa0MsSUFBSSxDQUFDQyxLQUFMLENBQVduQixRQUFRLENBQUNvQixPQUFULEtBQXFCLElBQWhDLENBQXhCO0FBQ0E7O0FBQ0QsUUFBTW5CLE1BQU0sR0FBR3RFLG1CQUFtQixDQUFDSSxhQUFwQixDQUFrQ3VCLFFBQWxDLENBQTJDLFVBQTNDLENBQWY7O0FBQ0EsUUFBSTJDLE1BQU0sS0FBSyxJQUFmLEVBQXFCO0FBQ3BCQSxNQUFBQSxNQUFNLENBQUNnQixRQUFQLENBQWdCLEVBQWhCLEVBQW9CLEVBQXBCLEVBQXdCLEVBQXhCLEVBQTRCLENBQTVCO0FBQ0FiLE1BQUFBLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZcEIsT0FBWixHQUFzQmlDLElBQUksQ0FBQ0MsS0FBTCxDQUFXbEIsTUFBTSxDQUFDbUIsT0FBUCxLQUFtQixJQUE5QixDQUF0QjtBQUNBOztBQUNELFdBQU96RixtQkFBbUIsQ0FBQ3dFLGtCQUFwQixDQUF1Q0MsTUFBdkMsQ0FBUDtBQUNBLEdBdFIwQjtBQXVSM0JpQixFQUFBQSxlQXZSMkIsNkJBdVJULENBRWpCLENBelIwQjtBQTBSM0I5QixFQUFBQSxjQTFSMkIsNEJBMFJWO0FBQ2hCaUIsSUFBQUEsSUFBSSxDQUFDNUUsUUFBTCxHQUFnQkQsbUJBQW1CLENBQUNDLFFBQXBDO0FBQ0E0RSxJQUFBQSxJQUFJLENBQUNjLEdBQUwsYUFBY0MsYUFBZDtBQUNBZixJQUFBQSxJQUFJLENBQUNsRSxhQUFMLEdBQXFCWCxtQkFBbUIsQ0FBQ1csYUFBekM7QUFDQWtFLElBQUFBLElBQUksQ0FBQ1EsZ0JBQUwsR0FBd0JyRixtQkFBbUIsQ0FBQ3FGLGdCQUE1QztBQUNBUixJQUFBQSxJQUFJLENBQUNhLGVBQUwsR0FBdUIxRixtQkFBbUIsQ0FBQzBGLGVBQTNDO0FBQ0FiLElBQUFBLElBQUksQ0FBQ3JELFVBQUw7QUFDQTtBQWpTMEIsQ0FBNUI7QUFvU0FsQyxDQUFDLENBQUN1RyxRQUFELENBQUQsQ0FBWUMsS0FBWixDQUFrQixZQUFNO0FBQ3ZCOUYsRUFBQUEsbUJBQW1CLENBQUN3QixVQUFwQjtBQUNBLENBRkQiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogTWlrb1BCWCAtIGZyZWUgcGhvbmUgc3lzdGVtIGZvciBzbWFsbCBidXNpbmVzc1xuICogQ29weXJpZ2h0IMKpIDIwMTctMjAyMyBBbGV4ZXkgUG9ydG5vdiBhbmQgTmlrb2xheSBCZWtldG92XG4gKlxuICogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqXG4gKiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuICpcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLlxuICogSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiAqL1xuXG4vKiBnbG9iYWwgZ2xvYmFsUm9vdFVybCxnbG9iYWxUcmFuc2xhdGUsIEV4dGVuc2lvbnMsIEZvcm0sIFNlbWFudGljTG9jYWxpemF0aW9uLCBTb3VuZEZpbGVzU2VsZWN0b3IgKi9cblxuXG4kLmZuLmZvcm0uc2V0dGluZ3MucnVsZXMuY3VzdG9tTm90RW1wdHlJZkFjdGlvblJ1bGUgPSAodmFsdWUsIGFjdGlvbikgPT4ge1xuXHRpZiAodmFsdWUubGVuZ3RoID09PSAwICYmICQoJyNhY3Rpb24nKS52YWwoKSA9PT0gYWN0aW9uKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdHJldHVybiB0cnVlO1xufTtcblxuY29uc3Qgb3V0T2ZXb3JrVGltZVJlY29yZCA9IHtcblx0JGZvcm1PYmo6ICQoJyNzYXZlLW91dG9mZndvcmstZm9ybScpLFxuXHQkZGVmYXVsdERyb3Bkb3duOiAkKCcjc2F2ZS1vdXRvZmZ3b3JrLWZvcm0gLmRyb3Bkb3duLWRlZmF1bHQnKSxcblx0JHJhbmdlRGF5c1N0YXJ0OiAkKCcjcmFuZ2UtZGF5cy1zdGFydCcpLFxuXHQkcmFuZ2VEYXlzRW5kOiAkKCcjcmFuZ2UtZGF5cy1lbmQnKSxcblx0JHJhbmdlVGltZVN0YXJ0OiAkKCcjcmFuZ2UtdGltZS1zdGFydCcpLFxuXHQkcmFuZ2VUaW1lRW5kOiAkKCcjcmFuZ2UtdGltZS1lbmQnKSxcblx0JGRhdGVfZnJvbTogJCgnI2RhdGVfZnJvbScpLFxuXHQkZGF0ZV90bzogJCgnI2RhdGVfdG8nKSxcblx0JHRpbWVfdG86ICQoJyN0aW1lX3RvJyksXG5cdCRmb3J3YXJkaW5nU2VsZWN0RHJvcGRvd246ICQoJyNzYXZlLW91dG9mZndvcmstZm9ybSAuZm9yd2FyZGluZy1zZWxlY3QnKSxcblx0dmFsaWRhdGVSdWxlczoge1xuXHRcdGF1ZGlvX21lc3NhZ2VfaWQ6IHtcblx0XHRcdGlkZW50aWZpZXI6ICdhdWRpb19tZXNzYWdlX2lkJyxcblx0XHRcdHJ1bGVzOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAnY3VzdG9tTm90RW1wdHlJZkFjdGlvblJ1bGVbcGxheW1lc3NhZ2VdJyxcblx0XHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS50Zl9WYWxpZGF0ZUF1ZGlvTWVzc2FnZUVtcHR5LFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHR9LFxuXHRcdGV4dGVuc2lvbjoge1xuXHRcdFx0aWRlbnRpZmllcjogJ2V4dGVuc2lvbicsXG5cdFx0XHRydWxlczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2N1c3RvbU5vdEVtcHR5SWZBY3Rpb25SdWxlW2V4dGVuc2lvbl0nLFxuXHRcdFx0XHRcdHByb21wdDogZ2xvYmFsVHJhbnNsYXRlLnRmX1ZhbGlkYXRlRXh0ZW5zaW9uRW1wdHksXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdH0sXG5cdFx0dGltZWZyb206IHtcblx0XHRcdG9wdGlvbmFsOiB0cnVlLFxuXHRcdFx0aWRlbnRpZmllcjogJ3RpbWVfZnJvbScsXG5cdFx0XHRydWxlczogW3tcblx0XHRcdFx0dHlwZTogJ3JlZ0V4cCcsXG5cdFx0XHRcdHZhbHVlOiAvXigyWzAtM118MT9bMC05XSk6KFswLTVdP1swLTldKSQvLFxuXHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS50Zl9WYWxpZGF0ZUNoZWNrVGltZUludGVydmFsLFxuXHRcdFx0fV0sXG5cdFx0fSxcblx0XHR0aW1ldG86IHtcblx0XHRcdGlkZW50aWZpZXI6ICd0aW1lX3RvJyxcblx0XHRcdG9wdGlvbmFsOiB0cnVlLFxuXHRcdFx0cnVsZXM6IFt7XG5cdFx0XHRcdHR5cGU6ICdyZWdFeHAnLFxuXHRcdFx0XHR2YWx1ZTogL14oMlswLTNdfDE/WzAtOV0pOihbMC01XT9bMC05XSkkLyxcblx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUudGZfVmFsaWRhdGVDaGVja1RpbWVJbnRlcnZhbCxcblx0XHRcdH1dLFxuXHRcdH0sXG5cdH0sXG5cdGluaXRpYWxpemUoKSB7XG5cdFx0JCgnI291dC10aW1lLW1vZGlmeS1tZW51IC5pdGVtJykudGFiKCk7XG5cdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kZGVmYXVsdERyb3Bkb3duLmRyb3Bkb3duKCk7XG5cdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VEYXlzU3RhcnQuY2FsZW5kYXIoe1xuXHRcdFx0Zmlyc3REYXlPZldlZWs6IFNlbWFudGljTG9jYWxpemF0aW9uLmNhbGVuZGFyRmlyc3REYXlPZldlZWssXG5cdFx0XHR0ZXh0OiBTZW1hbnRpY0xvY2FsaXphdGlvbi5jYWxlbmRhclRleHQsXG5cdFx0XHRlbmRDYWxlbmRhcjogb3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VEYXlzRW5kLFxuXHRcdFx0dHlwZTogJ2RhdGUnLFxuXHRcdFx0aW5saW5lOiBmYWxzZSxcblx0XHRcdG1vbnRoRmlyc3Q6IGZhbHNlLFxuXHRcdFx0cmVnRXhwOiBTZW1hbnRpY0xvY2FsaXphdGlvbi5yZWdFeHAsXG5cdFx0fSk7XG5cdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VEYXlzRW5kLmNhbGVuZGFyKHtcblx0XHRcdGZpcnN0RGF5T2ZXZWVrOiBTZW1hbnRpY0xvY2FsaXphdGlvbi5jYWxlbmRhckZpcnN0RGF5T2ZXZWVrLFxuXHRcdFx0dGV4dDogU2VtYW50aWNMb2NhbGl6YXRpb24uY2FsZW5kYXJUZXh0LFxuXHRcdFx0c3RhcnRDYWxlbmRhcjogb3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VEYXlzU3RhcnQsXG5cdFx0XHR0eXBlOiAnZGF0ZScsXG5cdFx0XHRpbmxpbmU6IGZhbHNlLFxuXHRcdFx0bW9udGhGaXJzdDogZmFsc2UsXG5cdFx0XHRyZWdFeHA6IFNlbWFudGljTG9jYWxpemF0aW9uLnJlZ0V4cCxcblx0XHRcdG9uQ2hhbmdlOiAobmV3RGF0ZVRvKSA9PiB7XG5cdFx0XHRcdGxldCBvbGREYXRlVG8gPSBvdXRPZldvcmtUaW1lUmVjb3JkLiRkYXRlX3RvLmF0dHIoJ3ZhbHVlJyk7XG5cdFx0XHRcdGlmIChuZXdEYXRlVG8gIT09IG51bGwgJiYgb2xkRGF0ZVRvICE9PSAnJykge1xuXHRcdFx0XHRcdG9sZERhdGVUbyA9IG5ldyBEYXRlKG9sZERhdGVUbyAqIDEwMDApO1xuXHRcdFx0XHRcdGlmICgobmV3RGF0ZVRvIC0gb2xkRGF0ZVRvKSAhPT0gMCkge1xuXHRcdFx0XHRcdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kZGF0ZV9mcm9tLnRyaWdnZXIoJ2NoYW5nZScpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHR9KTtcblx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRyYW5nZVRpbWVTdGFydC5jYWxlbmRhcih7XG5cdFx0XHRmaXJzdERheU9mV2VlazogU2VtYW50aWNMb2NhbGl6YXRpb24uY2FsZW5kYXJGaXJzdERheU9mV2Vlayxcblx0XHRcdHRleHQ6IFNlbWFudGljTG9jYWxpemF0aW9uLmNhbGVuZGFyVGV4dCxcblx0XHRcdGVuZENhbGVuZGFyOiBvdXRPZldvcmtUaW1lUmVjb3JkLiRyYW5nZVRpbWVFbmQsXG5cdFx0XHR0eXBlOiAndGltZScsXG5cdFx0XHRpbmxpbmU6IGZhbHNlLFxuXHRcdFx0ZGlzYWJsZU1pbnV0ZTogdHJ1ZSxcblx0XHRcdGFtcG06IGZhbHNlLFxuXHRcdH0pO1xuXHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlVGltZUVuZC5jYWxlbmRhcih7XG5cdFx0XHRmaXJzdERheU9mV2VlazogU2VtYW50aWNMb2NhbGl6YXRpb24uY2FsZW5kYXJGaXJzdERheU9mV2Vlayxcblx0XHRcdHRleHQ6IFNlbWFudGljTG9jYWxpemF0aW9uLmNhbGVuZGFyVGV4dCxcblx0XHRcdHR5cGU6ICd0aW1lJyxcblx0XHRcdGlubGluZTogZmFsc2UsXG5cdFx0XHRkaXNhYmxlTWludXRlOiB0cnVlLFxuXHRcdFx0YW1wbTogZmFsc2UsXG5cdFx0XHRvbkNoYW5nZTogKG5ld1RpbWVUbykgPT4ge1xuXHRcdFx0XHRsZXQgb2xkVGltZVRvID0gb3V0T2ZXb3JrVGltZVJlY29yZC4kdGltZV90by5hdHRyKCd2YWx1ZScpO1xuXHRcdFx0XHRpZiAobmV3VGltZVRvICE9PSBudWxsICYmIG9sZFRpbWVUbyAhPT0gJycpIHtcblx0XHRcdFx0XHRvbGRUaW1lVG8gPSBuZXcgRGF0ZShvbGRUaW1lVG8gKiAxMDAwKTtcblx0XHRcdFx0XHRpZiAoKG5ld1RpbWVUbyAtIG9sZFRpbWVUbykgIT09IDApIHtcblx0XHRcdFx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJHRpbWVfdG8udHJpZ2dlcignY2hhbmdlJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdH0pO1xuXHRcdCQoJyNhY3Rpb24nKVxuXHRcdFx0LmRyb3Bkb3duKHtcblx0XHRcdFx0b25DaGFuZ2UoKSB7XG5cdFx0XHRcdFx0b3V0T2ZXb3JrVGltZVJlY29yZC50b2dnbGVEaXNhYmxlZEZpZWxkQ2xhc3MoKTtcblx0XHRcdFx0fSxcblx0XHRcdH0pO1xuXHRcdCQoJyN3ZWVrZGF5X2Zyb20nKVxuXHRcdFx0LmRyb3Bkb3duKHtcblx0XHRcdFx0b25DaGFuZ2UoKSB7XG5cdFx0XHRcdFx0Y29uc3QgZnJvbSA9IG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmouZm9ybSgnZ2V0IHZhbHVlJywgJ3dlZWtkYXlfZnJvbScpO1xuXHRcdFx0XHRcdGNvbnN0IHRvID0gb3V0T2ZXb3JrVGltZVJlY29yZC4kZm9ybU9iai5mb3JtKCdnZXQgdmFsdWUnLCAnd2Vla2RheV90bycpO1xuXHRcdFx0XHRcdGlmIChmcm9tIDwgdG8gfHwgdG8gPT09IC0xIHx8IGZyb20gPT09IC0xKSB7XG5cdFx0XHRcdFx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRmb3JtT2JqLmZvcm0oJ3NldCB2YWx1ZScsICd3ZWVrZGF5X3RvJywgZnJvbSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0fSk7XG5cdFx0JCgnI3dlZWtkYXlfdG8nKVxuXHRcdFx0LmRyb3Bkb3duKHtcblx0XHRcdFx0b25DaGFuZ2UoKSB7XG5cdFx0XHRcdFx0Y29uc3QgZnJvbSA9IG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmouZm9ybSgnZ2V0IHZhbHVlJywgJ3dlZWtkYXlfZnJvbScpO1xuXHRcdFx0XHRcdGNvbnN0IHRvID0gb3V0T2ZXb3JrVGltZVJlY29yZC4kZm9ybU9iai5mb3JtKCdnZXQgdmFsdWUnLCAnd2Vla2RheV90bycpO1xuXHRcdFx0XHRcdGlmICh0byA8IGZyb20gfHwgZnJvbSA9PT0gLTEpIHtcblx0XHRcdFx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmouZm9ybSgnc2V0IHZhbHVlJywgJ3dlZWtkYXlfZnJvbScsIHRvKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHR9KTtcblxuXHRcdCQoJyNlcmFzZS1kYXRlcycpLm9uKCdjbGljaycsIChlKSA9PiB7XG5cdFx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRyYW5nZURheXNTdGFydC5jYWxlbmRhcignY2xlYXInKTtcblx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlRGF5c0VuZC5jYWxlbmRhcignY2xlYXInKTtcblx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmpcblx0XHRcdFx0LmZvcm0oJ3NldCB2YWx1ZXMnLCB7XG5cdFx0XHRcdFx0ZGF0ZV9mcm9tOiAnJyxcblx0XHRcdFx0XHRkYXRlX3RvOiAnJyxcblx0XHRcdFx0fSk7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0fSk7XG5cblx0XHQkKCcjZXJhc2Utd2Vla2RheXMnKS5vbignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kZm9ybU9ialxuXHRcdFx0XHQuZm9ybSgnc2V0IHZhbHVlcycsIHtcblx0XHRcdFx0XHR3ZWVrZGF5X2Zyb206IC0xLFxuXHRcdFx0XHRcdHdlZWtkYXlfdG86IC0xLFxuXHRcdFx0XHR9KTtcblx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlRGF5c1N0YXJ0LnRyaWdnZXIoJ2NoYW5nZScpO1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH0pO1xuXHRcdCQoJyNlcmFzZS10aW1lcGVyaW9kJykub24oJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlVGltZVN0YXJ0LmNhbGVuZGFyKCdjbGVhcicpO1xuXHRcdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VUaW1lRW5kLmNhbGVuZGFyKCdjbGVhcicpO1xuXHRcdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kdGltZV90by50cmlnZ2VyKCdjaGFuZ2UnKTtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR9KTtcblxuXHRcdCQoJyNzYXZlLW91dG9mZndvcmstZm9ybSAuYXVkaW8tbWVzc2FnZS1zZWxlY3QnKS5kcm9wZG93bihTb3VuZEZpbGVzU2VsZWN0b3IuZ2V0RHJvcGRvd25TZXR0aW5nc1dpdGhFbXB0eSgpKTtcblxuXHRcdG91dE9mV29ya1RpbWVSZWNvcmQuaW5pdGlhbGl6ZUZvcm0oKTtcblx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRmb3J3YXJkaW5nU2VsZWN0RHJvcGRvd24uZHJvcGRvd24oRXh0ZW5zaW9ucy5nZXREcm9wZG93blNldHRpbmdzV2l0aG91dEVtcHR5KCkpO1xuXHRcdG91dE9mV29ya1RpbWVSZWNvcmQudG9nZ2xlRGlzYWJsZWRGaWVsZENsYXNzKCk7XG5cdFx0b3V0T2ZXb3JrVGltZVJlY29yZC5jaGFuZ2VEYXRlRm9ybWF0KCk7XG5cblx0XHQkKCcjaW5ib3VuZC1ydWxlcy10YWJsZSAudWkuY2hlY2tib3gnKS5jaGVja2JveCh7XG5cdFx0XHRvbkNoYW5nZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmKCQodGhpcykucGFyZW50KCkuY2hlY2tib3goJ2lzIGNoZWNrZWQnKSl7XG5cdFx0XHRcdFx0JCgnI2luYm91bmQtcnVsZXMtdGFibGUgLnVpLmNoZWNrYm94W2RhdGEtZGlkPScrJCh0aGlzKS5wYXJlbnQoKS5hdHRyKCdkYXRhLWRpZCcpKyddJykuY2hlY2tib3goJ3NldCBjaGVja2VkJylcblx0XHRcdFx0fWVsc2V7XG5cdFx0XHRcdFx0JCgnI2luYm91bmQtcnVsZXMtdGFibGUgLnVpLmNoZWNrYm94W2RhdGEtZGlkPScrJCh0aGlzKS5wYXJlbnQoKS5hdHRyKCdkYXRhLWRpZCcpKyddJykuY2hlY2tib3goJ3NldCB1bmNoZWNrZWQnKVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0JCgnI2FsbG93UmVzdHJpY3Rpb24nKS5wYXJlbnQoKS5jaGVja2JveCh7XG5cdFx0XHRvbkNoYW5nZTogb3V0T2ZXb3JrVGltZVJlY29yZC5jaGFuZ2VSZXN0cmljdGlvblxuXHRcdH0pO1xuXHRcdG91dE9mV29ya1RpbWVSZWNvcmQuY2hhbmdlUmVzdHJpY3Rpb24oKTtcblx0fSxcblx0Y2hhbmdlUmVzdHJpY3Rpb24oKXtcblx0XHRpZigkKCcjYWxsb3dSZXN0cmljdGlvbicpLnBhcmVudCgpLmNoZWNrYm94KCdpcyBjaGVja2VkJykpe1xuXHRcdFx0JChcImFbZGF0YS10YWI9J3J1bGVzJ11cIikuc2hvdygpO1xuXHRcdH1lbHNle1xuXHRcdFx0JChcImFbZGF0YS10YWI9J3J1bGVzJ11cIikuaGlkZSgpO1xuXHRcdH1cblx0fSxcblx0LyoqXG5cdCAqINCc0LXQvdGP0LXRgiDQv9GA0LXQtNGB0YLQsNCy0LvQtdC90LjQtSDQtNCw0YLRiyDQvdCw0YfQsNC70LAg0Lgg0LTQsNGC0Ysg0L7QutC+0L3Rh9Cw0L3QuNGPINC40LcgbGludXh0aW1lINCyINC70L7QutCw0LvRjNC90L7QtSDQv9GA0LXQtNGB0YLQsNCy0LvQtdC90LjQtVxuXHQgKi9cblx0Y2hhbmdlRGF0ZUZvcm1hdCgpIHtcblx0XHRjb25zdCBkYXRlRnJvbSA9IG91dE9mV29ya1RpbWVSZWNvcmQuJGRhdGVfZnJvbS5hdHRyKCd2YWx1ZScpO1xuXHRcdGNvbnN0IGRhdGVUbyA9IG91dE9mV29ya1RpbWVSZWNvcmQuJGRhdGVfdG8uYXR0cigndmFsdWUnKTtcblx0XHRpZiAoZGF0ZUZyb20gIT09IHVuZGVmaW5lZCAmJiBkYXRlRnJvbS5sZW5ndGggPiAwKSB7XG5cdFx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRyYW5nZURheXNTdGFydC5jYWxlbmRhcignc2V0IGRhdGUnLCBuZXcgRGF0ZShkYXRlRnJvbSAqIDEwMDApKTtcblx0XHRcdC8vIG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmouZm9ybSgnc2V0IHZhbHVlJywgJ2RhdGVfZnJvbScsIGRhdGVGcm9tKTtcblx0XHR9XG5cdFx0aWYgKGRhdGVUbyAhPT0gdW5kZWZpbmVkICYmIGRhdGVUby5sZW5ndGggPiAwKSB7XG5cdFx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRyYW5nZURheXNFbmQuY2FsZW5kYXIoJ3NldCBkYXRlJywgbmV3IERhdGUoZGF0ZVRvICogMTAwMCkpO1xuXHRcdFx0Ly8gb3V0T2ZXb3JrVGltZVJlY29yZC4kZm9ybU9iai5mb3JtKCdzZXQgdmFsdWUnLCAnZGF0ZV90bycsIGRhdGVUbyk7XG5cdFx0fVxuXHR9LFxuXHR0b2dnbGVEaXNhYmxlZEZpZWxkQ2xhc3MoKSB7XG5cdFx0aWYgKG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmouZm9ybSgnZ2V0IHZhbHVlJywgJ2FjdGlvbicpID09PSAnZXh0ZW5zaW9uJykge1xuXHRcdFx0JCgnI2V4dGVuc2lvbi1ncm91cCcpLnNob3coKTtcblx0XHRcdCQoJyNhdWRpby1maWxlLWdyb3VwJykuaGlkZSgpO1xuXHRcdFx0JCgnI2F1ZGlvX21lc3NhZ2VfaWQnKS5kcm9wZG93bignY2xlYXInKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JCgnI2V4dGVuc2lvbi1ncm91cCcpLmhpZGUoKTtcblx0XHRcdCQoJyNhdWRpby1maWxlLWdyb3VwJykuc2hvdygpO1xuXHRcdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kZm9ybU9iai5mb3JtKCdzZXQgdmFsdWUnLCAnZXh0ZW5zaW9uJywgLTEpO1xuXHRcdH1cblx0fSxcblx0LyoqXG5cdCAqINCa0LDRgdGC0L7QvNC90LDRjyDQv9GA0L7QstC10YDQutCwINC/0L7Qu9C10Lkg0YTQvtGA0LzRiywg0LrQvtGC0L7RgNGL0LUg0L3QtSDQv9C+0LvRg9GH0LDQtdGC0YHRjyDRgdC00LXQu9Cw0YLRjCDRh9C10YDQtdC3INCy0LDQu9C40LTQsNGG0LjRjlxuXHQgKiBAcGFyYW0gcmVzdWx0XG5cdCAqIEByZXR1cm5zIHsqfVxuXHQgKi9cblx0Y3VzdG9tVmFsaWRhdGVGb3JtKHJlc3VsdCkge1xuXHRcdC8vINCf0YDQvtCy0LXRgNC40Lwg0L/QvtC70Y8g0LTQsNGC0Ytcblx0XHRpZiAoKHJlc3VsdC5kYXRhLmRhdGVfZnJvbSAhPT0gJycgJiYgcmVzdWx0LmRhdGEuZGF0ZV90byA9PT0gJycpXG5cdFx0XHR8fCAocmVzdWx0LmRhdGEuZGF0ZV90byAhPT0gJycgJiYgcmVzdWx0LmRhdGEuZGF0ZV9mcm9tID09PSAnJykpIHtcblx0XHRcdCQoJy5mb3JtIC5lcnJvci5tZXNzYWdlJykuaHRtbChnbG9iYWxUcmFuc2xhdGUudGZfVmFsaWRhdGVDaGVja0RhdGVJbnRlcnZhbCkuc2hvdygpO1xuXHRcdFx0Rm9ybS4kc3VibWl0QnV0dG9uLnRyYW5zaXRpb24oJ3NoYWtlJykucmVtb3ZlQ2xhc3MoJ2xvYWRpbmcgZGlzYWJsZWQnKTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0Ly8g0J/RgNC+0LLQtdGA0LjQvCDQv9C+0LvRjyDQtNC90LXQuSDQvdC10LTQtdC70Lhcblx0XHRpZiAoKHJlc3VsdC5kYXRhLndlZWtkYXlfZnJvbSA+IDAgJiYgcmVzdWx0LmRhdGEud2Vla2RheV90byA9PT0gJy0xJylcblx0XHRcdHx8IChyZXN1bHQuZGF0YS53ZWVrZGF5X3RvID4gMCAmJiByZXN1bHQuZGF0YS53ZWVrZGF5X2Zyb20gPT09ICctMScpKSB7XG5cdFx0XHQkKCcuZm9ybSAuZXJyb3IubWVzc2FnZScpLmh0bWwoZ2xvYmFsVHJhbnNsYXRlLnRmX1ZhbGlkYXRlQ2hlY2tXZWVrRGF5SW50ZXJ2YWwpLnNob3coKTtcblx0XHRcdEZvcm0uJHN1Ym1pdEJ1dHRvbi50cmFuc2l0aW9uKCdzaGFrZScpLnJlbW92ZUNsYXNzKCdsb2FkaW5nIGRpc2FibGVkJyk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdC8vINCf0YDQvtCy0LXRgNC40Lwg0L/QvtC70Y8g0LLRgNC10LzQtdC90Lhcblx0XHRpZiAoKHJlc3VsdC5kYXRhLnRpbWVfZnJvbS5sZW5ndGggPiAwICYmIHJlc3VsdC5kYXRhLnRpbWVfdG8ubGVuZ3RoID09PSAwKVxuXHRcdFx0fHwgKHJlc3VsdC5kYXRhLnRpbWVfdG8ubGVuZ3RoID4gMCAmJiByZXN1bHQuZGF0YS50aW1lX2Zyb20ubGVuZ3RoID09PSAwKSkge1xuXHRcdFx0JCgnLmZvcm0gLmVycm9yLm1lc3NhZ2UnKS5odG1sKGdsb2JhbFRyYW5zbGF0ZS50Zl9WYWxpZGF0ZUNoZWNrVGltZUludGVydmFsKS5zaG93KCk7XG5cdFx0XHRGb3JtLiRzdWJtaXRCdXR0b24udHJhbnNpdGlvbignc2hha2UnKS5yZW1vdmVDbGFzcygnbG9hZGluZyBkaXNhYmxlZCcpO1xuXG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdC8vINCf0YDQvtCy0LXRgNC40Lwg0L/QvtC70Y8g0LLRgNC10LzQtdC90Lgg0L3QsCDRgdC+0LHQu9GO0LTQtdC90LjQtSDRhNC+0YDQvNCw0YLRg1xuXHRcdGlmICgocmVzdWx0LmRhdGEudGltZV9mcm9tLmxlbmd0aCA+IDAgJiYgcmVzdWx0LmRhdGEudGltZV90by5sZW5ndGggPT09IDApXG5cdFx0XHR8fCAocmVzdWx0LmRhdGEudGltZV90by5sZW5ndGggPiAwICYmIHJlc3VsdC5kYXRhLnRpbWVfZnJvbS5sZW5ndGggPT09IDApKSB7XG5cdFx0XHQkKCcuZm9ybSAuZXJyb3IubWVzc2FnZScpLmh0bWwoZ2xvYmFsVHJhbnNsYXRlLnRmX1ZhbGlkYXRlQ2hlY2tUaW1lSW50ZXJ2YWwpLnNob3coKTtcblx0XHRcdEZvcm0uJHN1Ym1pdEJ1dHRvbi50cmFuc2l0aW9uKCdzaGFrZScpLnJlbW92ZUNsYXNzKCdsb2FkaW5nIGRpc2FibGVkJyk7XG5cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHQvLyDQn9GA0L7QstC10YDQuNC8INCy0YHQtSDQv9C+0LvRj1xuXHRcdGlmIChyZXN1bHQuZGF0YS50aW1lX2Zyb20gPT09ICcnXG5cdFx0XHQmJiByZXN1bHQuZGF0YS50aW1lX3RvID09PSAnJ1xuXHRcdFx0JiYgcmVzdWx0LmRhdGEud2Vla2RheV9mcm9tID09PSAnLTEnXG5cdFx0XHQmJiByZXN1bHQuZGF0YS53ZWVrZGF5X3RvID09PSAnLTEnXG5cdFx0XHQmJiByZXN1bHQuZGF0YS5kYXRlX2Zyb20gPT09ICcnXG5cdFx0XHQmJiByZXN1bHQuZGF0YS5kYXRlX3RvID09PSAnJykge1xuXHRcdFx0JCgnLmZvcm0gLmVycm9yLm1lc3NhZ2UnKS5odG1sKGdsb2JhbFRyYW5zbGF0ZS50Zl9WYWxpZGF0ZU5vUnVsZXNTZWxlY3RlZCkuc2hvdygpO1xuXHRcdFx0Rm9ybS4kc3VibWl0QnV0dG9uLnRyYW5zaXRpb24oJ3NoYWtlJykucmVtb3ZlQ2xhc3MoJ2xvYWRpbmcgZGlzYWJsZWQnKTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fSxcblx0Y2JCZWZvcmVTZW5kRm9ybShzZXR0aW5ncykge1xuXHRcdGNvbnN0IHJlc3VsdCA9IHNldHRpbmdzO1xuXHRcdCQoJy5mb3JtIC5lcnJvci5tZXNzYWdlJykuaHRtbCgnJykuaGlkZSgpO1xuXHRcdHJlc3VsdC5kYXRhID0gb3V0T2ZXb3JrVGltZVJlY29yZC4kZm9ybU9iai5mb3JtKCdnZXQgdmFsdWVzJyk7XG5cdFx0Y29uc3QgZGF0ZUZyb20gPSBvdXRPZldvcmtUaW1lUmVjb3JkLiRyYW5nZURheXNTdGFydC5jYWxlbmRhcignZ2V0IGRhdGUnKTtcblx0XHRpZiAoZGF0ZUZyb20gIT09IG51bGwpIHtcblx0XHRcdGRhdGVGcm9tLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuXHRcdFx0cmVzdWx0LmRhdGEuZGF0ZV9mcm9tID0gTWF0aC5yb3VuZChkYXRlRnJvbS5nZXRUaW1lKCkgLyAxMDAwKTtcblx0XHR9XG5cdFx0Y29uc3QgZGF0ZVRvID0gb3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VEYXlzRW5kLmNhbGVuZGFyKCdnZXQgZGF0ZScpO1xuXHRcdGlmIChkYXRlVG8gIT09IG51bGwpIHtcblx0XHRcdGRhdGVUby5zZXRIb3VycygyMywgNTksIDU5LCAwKTtcblx0XHRcdHJlc3VsdC5kYXRhLmRhdGVfdG8gPSBNYXRoLnJvdW5kKGRhdGVUby5nZXRUaW1lKCkgLyAxMDAwKTtcblx0XHR9XG5cdFx0cmV0dXJuIG91dE9mV29ya1RpbWVSZWNvcmQuY3VzdG9tVmFsaWRhdGVGb3JtKHJlc3VsdCk7XG5cdH0sXG5cdGNiQWZ0ZXJTZW5kRm9ybSgpIHtcblxuXHR9LFxuXHRpbml0aWFsaXplRm9ybSgpIHtcblx0XHRGb3JtLiRmb3JtT2JqID0gb3V0T2ZXb3JrVGltZVJlY29yZC4kZm9ybU9iajtcblx0XHRGb3JtLnVybCA9IGAke2dsb2JhbFJvb3RVcmx9b3V0LW9mZi13b3JrLXRpbWUvc2F2ZWA7XG5cdFx0Rm9ybS52YWxpZGF0ZVJ1bGVzID0gb3V0T2ZXb3JrVGltZVJlY29yZC52YWxpZGF0ZVJ1bGVzO1xuXHRcdEZvcm0uY2JCZWZvcmVTZW5kRm9ybSA9IG91dE9mV29ya1RpbWVSZWNvcmQuY2JCZWZvcmVTZW5kRm9ybTtcblx0XHRGb3JtLmNiQWZ0ZXJTZW5kRm9ybSA9IG91dE9mV29ya1RpbWVSZWNvcmQuY2JBZnRlclNlbmRGb3JtO1xuXHRcdEZvcm0uaW5pdGlhbGl6ZSgpO1xuXHR9LFxufTtcblxuJChkb2N1bWVudCkucmVhZHkoKCkgPT4ge1xuXHRvdXRPZldvcmtUaW1lUmVjb3JkLmluaXRpYWxpemUoKTtcbn0pO1xuIl19