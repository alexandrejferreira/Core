"use strict";

/*
 * MikoPBX - free phone system for small business
 * Copyright (C) 2017-2020 Alexey Portnov and Nikolay Beketov
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with this program.
 * If not, see <https://www.gnu.org/licenses/>.
 */

/* global globalRootUrl, globalTranslate, globalWebAdminLanguage, sessionStorage */
var pbxExtensionMenuAddition = {
  $sidebarMenu: $('#sidebar-menu'),
  originalMenuHtml: '',
  initialize: function initialize() {
    pbxExtensionMenuAddition.$sidebarMenu.sidebar({}).sidebar('setting', 'transition', 'push').sidebar('setting', 'dimPage', false);
    pbxExtensionMenuAddition.makeMenuActiveElement();
  },
  //Sets the active menu item in the sidebar based on the current URL.
  makeMenuActiveElement: function makeMenuActiveElement() {
    var current = window.location.href;
    $.each($('#sidebar-menu a'), function (index, value) {
      var $this = $(value);
      $this.removeClass('active'); // if the current path is like this link, make it active

      var needle = $this.attr('href').replace('/index', '').replace('/modify', '');

      if (current.indexOf(needle) !== -1 && !$this.hasClass('logo')) {
        $this.addClass('active');
      }
    });
  }
};
$(document).ready(function () {
  pbxExtensionMenuAddition.initialize();
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9QYnhFeHRlbnNpb25Nb2R1bGVzL3BieC1leHRlbnNpb24tbWVudS1hZGRpdGlvbi5qcyJdLCJuYW1lcyI6WyJwYnhFeHRlbnNpb25NZW51QWRkaXRpb24iLCIkc2lkZWJhck1lbnUiLCIkIiwib3JpZ2luYWxNZW51SHRtbCIsImluaXRpYWxpemUiLCJzaWRlYmFyIiwibWFrZU1lbnVBY3RpdmVFbGVtZW50IiwiY3VycmVudCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImVhY2giLCJpbmRleCIsInZhbHVlIiwiJHRoaXMiLCJyZW1vdmVDbGFzcyIsIm5lZWRsZSIsImF0dHIiLCJyZXBsYWNlIiwiaW5kZXhPZiIsImhhc0NsYXNzIiwiYWRkQ2xhc3MiLCJkb2N1bWVudCIsInJlYWR5Il0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFFQSxJQUFNQSx3QkFBd0IsR0FBRztBQUNoQ0MsRUFBQUEsWUFBWSxFQUFFQyxDQUFDLENBQUMsZUFBRCxDQURpQjtBQUVoQ0MsRUFBQUEsZ0JBQWdCLEVBQUUsRUFGYztBQUdoQ0MsRUFBQUEsVUFIZ0Msd0JBR25CO0FBQ1pKLElBQUFBLHdCQUF3QixDQUFDQyxZQUF6QixDQUNFSSxPQURGLENBQ1UsRUFEVixFQUVFQSxPQUZGLENBRVUsU0FGVixFQUVxQixZQUZyQixFQUVtQyxNQUZuQyxFQUdFQSxPQUhGLENBR1UsU0FIVixFQUdxQixTQUhyQixFQUdnQyxLQUhoQztBQUlBTCxJQUFBQSx3QkFBd0IsQ0FBQ00scUJBQXpCO0FBQ0EsR0FUK0I7QUFXaEM7QUFDQUEsRUFBQUEscUJBWmdDLG1DQVlSO0FBQ3ZCLFFBQU1DLE9BQU8sR0FBR0MsTUFBTSxDQUFDQyxRQUFQLENBQWdCQyxJQUFoQztBQUNBUixJQUFBQSxDQUFDLENBQUNTLElBQUYsQ0FBT1QsQ0FBQyxDQUFDLGlCQUFELENBQVIsRUFBNkIsVUFBQ1UsS0FBRCxFQUFRQyxLQUFSLEVBQWtCO0FBQzlDLFVBQU1DLEtBQUssR0FBR1osQ0FBQyxDQUFDVyxLQUFELENBQWY7QUFDQUMsTUFBQUEsS0FBSyxDQUFDQyxXQUFOLENBQWtCLFFBQWxCLEVBRjhDLENBRzlDOztBQUNBLFVBQU1DLE1BQU0sR0FBR0YsS0FBSyxDQUFDRyxJQUFOLENBQVcsTUFBWCxFQUNiQyxPQURhLENBQ0wsUUFESyxFQUNLLEVBREwsRUFFYkEsT0FGYSxDQUVMLFNBRkssRUFFTSxFQUZOLENBQWY7O0FBSUEsVUFBSVgsT0FBTyxDQUFDWSxPQUFSLENBQWdCSCxNQUFoQixNQUE0QixDQUFDLENBQTdCLElBQ0QsQ0FBQ0YsS0FBSyxDQUFDTSxRQUFOLENBQWUsTUFBZixDQURKLEVBQzRCO0FBQzNCTixRQUFBQSxLQUFLLENBQUNPLFFBQU4sQ0FBZSxRQUFmO0FBQ0E7QUFDRCxLQVpEO0FBYUE7QUEzQitCLENBQWpDO0FBOEJBbkIsQ0FBQyxDQUFDb0IsUUFBRCxDQUFELENBQVlDLEtBQVosQ0FBa0IsWUFBTTtBQUN2QnZCLEVBQUFBLHdCQUF3QixDQUFDSSxVQUF6QjtBQUNBLENBRkQiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogTWlrb1BCWCAtIGZyZWUgcGhvbmUgc3lzdGVtIGZvciBzbWFsbCBidXNpbmVzc1xuICogQ29weXJpZ2h0IChDKSAyMDE3LTIwMjAgQWxleGV5IFBvcnRub3YgYW5kIE5pa29sYXkgQmVrZXRvdlxuICpcbiAqIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuICogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3JcbiAqIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG4gKlxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS5cbiAqIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXG4gKi9cblxuLyogZ2xvYmFsIGdsb2JhbFJvb3RVcmwsIGdsb2JhbFRyYW5zbGF0ZSwgZ2xvYmFsV2ViQWRtaW5MYW5ndWFnZSwgc2Vzc2lvblN0b3JhZ2UgKi9cblxuY29uc3QgcGJ4RXh0ZW5zaW9uTWVudUFkZGl0aW9uID0ge1xuXHQkc2lkZWJhck1lbnU6ICQoJyNzaWRlYmFyLW1lbnUnKSxcblx0b3JpZ2luYWxNZW51SHRtbDogJycsXG5cdGluaXRpYWxpemUoKSB7XG5cdFx0cGJ4RXh0ZW5zaW9uTWVudUFkZGl0aW9uLiRzaWRlYmFyTWVudVxuXHRcdFx0LnNpZGViYXIoe30pXG5cdFx0XHQuc2lkZWJhcignc2V0dGluZycsICd0cmFuc2l0aW9uJywgJ3B1c2gnKVxuXHRcdFx0LnNpZGViYXIoJ3NldHRpbmcnLCAnZGltUGFnZScsIGZhbHNlKTtcblx0XHRwYnhFeHRlbnNpb25NZW51QWRkaXRpb24ubWFrZU1lbnVBY3RpdmVFbGVtZW50KCk7XG5cdH0sXG5cblx0Ly9TZXRzIHRoZSBhY3RpdmUgbWVudSBpdGVtIGluIHRoZSBzaWRlYmFyIGJhc2VkIG9uIHRoZSBjdXJyZW50IFVSTC5cblx0bWFrZU1lbnVBY3RpdmVFbGVtZW50KCkge1xuXHRcdGNvbnN0IGN1cnJlbnQgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcblx0XHQkLmVhY2goJCgnI3NpZGViYXItbWVudSBhJyksIChpbmRleCwgdmFsdWUpID0+IHtcblx0XHRcdGNvbnN0ICR0aGlzID0gJCh2YWx1ZSk7XG5cdFx0XHQkdGhpcy5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cdFx0XHQvLyBpZiB0aGUgY3VycmVudCBwYXRoIGlzIGxpa2UgdGhpcyBsaW5rLCBtYWtlIGl0IGFjdGl2ZVxuXHRcdFx0Y29uc3QgbmVlZGxlID0gJHRoaXMuYXR0cignaHJlZicpXG5cdFx0XHRcdC5yZXBsYWNlKCcvaW5kZXgnLCAnJylcblx0XHRcdFx0LnJlcGxhY2UoJy9tb2RpZnknLCAnJyk7XG5cblx0XHRcdGlmIChjdXJyZW50LmluZGV4T2YobmVlZGxlKSAhPT0gLTFcblx0XHRcdCYmICEkdGhpcy5oYXNDbGFzcygnbG9nbycpKSB7XG5cdFx0XHRcdCR0aGlzLmFkZENsYXNzKCdhY3RpdmUnKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSxcbn07XG5cbiQoZG9jdW1lbnQpLnJlYWR5KCgpID0+IHtcblx0cGJ4RXh0ZW5zaW9uTWVudUFkZGl0aW9uLmluaXRpYWxpemUoKTtcbn0pO1xuIl19